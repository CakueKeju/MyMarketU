<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <title>Product Management - MyMarketU</title>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
   <link th:href="@{/css/styleA.css}" rel="stylesheet">
</head>
<body>
   <div class="wrapper">
       <!-- Admin Header -->
       <section class="section-head">
           <div class="container">
               <div class="row-fluid">
                   <div class="span6">
                       <div class="logo">
                           <span class="text">
                               <a th:href="@{/admin/dashboard}">MyMarketU</a>
                           </span>
                       </div>
                   </div>
                   <div class="span6">
                       <div class="admin-profile">
                           <span>Welcome, Admin</span>
                           <a th:href="@{/logout}">Logout</a>
                       </div>
                   </div>
               </div>
           </div>
       </section>

       <!-- Admin Navigation -->
       <div class="admin-nav">
           <div class="container">
               <ul class="nav nav-tabs">
                   <li><a th:href="@{/admin/dashboard}">Dashboard</a></li>
                   <li class="active"><a th:href="@{/admin/products-admin}">Products</a></li>
                   <li><a th:href="@{/admin/orders-admin}">Orders</a></li>
                   <li><a th:href="@{/admin/customersmenu-admin}">Customers</a></li>
                   <li><a th:href="@{/admin/reports-admin}">Reports</a></li>
                   <li><a th:href="@{/admin/profile-settings-admin}">Settings</a></li>
               </ul>
           </div>
       </div>

       <!-- Content -->
       <div class="container">
           <!-- Add Product Button -->
           <div class="product-actions">
               <button onclick="showAddForm()" class="btn btn-primary">
                   <i class="fa fa-plus"></i> Add New Product
               </button>
           </div>

           <!-- Add Product Form -->
           <div class="add-form" id="addProductForm">
               <div class="span12">
                   <h3>Add New Product</h3>
                   <form th:action="@{/admin/product/add}" method="post" enctype="multipart/form-data">
                       <div class="control-group">
                           <label>Product Name</label>
                           <input type="text" name="nama" class="input-block-level" required>
                       </div>
                       <div class="control-group">
                           <label>Category</label>
                           <select name="kategori" class="input-block-level" required>
                               <option value="">Select Category</option>
                               <option value="Makanan">Makanan</option>
                               <option value="Minuman">Minuman</option>
                               <option value="Kebutuhan">Kebutuhan</option>
                           </select>
                       </div>
                       <div class="control-group">
                           <label>Harga (Rupiah)</label>
                           <input type="number" name="harga" min="0" step="1" required>
                       </div>
                       <div class="control-group">
                           <label>Stok</label>
                           <input type="number" name="stok" min="0" step="1" required>
                       </div>
                       <div class="control-group">
                           <label>Deskripsi</label>
                           <textarea name="deskripsi" class="input-block-level" rows="3"></textarea>
                       </div>
                       <div class="control-group">
                           <label>Product Image</label>
                           <input type="file" name="imageFile" class="input-block-level" accept="image/*">
                       </div>
                       <div class="control-group">
                           <label>Discount (%)</label>
                           <input type="number" name="diskon" min="0" max="100" step="1" required>
                       </div>
                       <div class="form-actions">
                           <button type="submit" class="btn btn-primary">Save Product</button>
                           <button type="button" onclick="hideAddForm()" class="btn">Cancel</button>
                       </div>
                   </form>
               </div>
           </div>

           <!-- Product List -->
           <div class="row-fluid">
               <div class="span12">
                   <h3>Product List</h3>
                   <table class="table table-striped">
                       <thead>
                           <tr>
                               <th>ID</th>
                               <th>Image</th>
                               <th>Name</th>
                               <th>Category</th>
                               <th>Price</th>
                               <th>Stock</th>
                               <th>Actions</th>
                           </tr>
                       </thead>
                       <tbody>
                           <tr th:each="product : ${products}">
                               <td th:text="${product.id}"></td>
                               <td>
                                   <img th:if="${product.namaFileGambar}" 
                                        th:src="@{'/images/' + ${product.namaFileGambar}}" 
                                        style="max-width: 100px; height: auto;">
                               </td>
                               <td th:text="${product.nama}"></td>
                               <td th:text="${product.kategori}"></td>
                               <td th:text="${'Rp. ' + #numbers.formatDecimal(product.harga, 0, 'COMMA', 0, 'POINT')}"></td>
                               <td th:text="${product.stok}"></td>
                               <td>
                                   <a th:href="@{'/admin/product/edit/' + ${product.id}}" 
                                      class="btn btn-small btn-primary">
                                       <i class="fa fa-edit"></i> Edit
                                   </a>
                                   <form th:action="@{'/admin/product/delete/' + ${product.id}}" 
                                         method="post" style="display: inline;">
                                       <button type="submit" class="btn btn-small btn-danger" 
                                               onclick="return confirm('Are you sure you want to delete this product?')">
                                           <i class="fa fa-trash"></i> Delete
                                       </button>
                                   </form>
                               </td>
                           </tr>
                       </tbody>
                   </table>
               </div>
           </div>
       </div>

       <!-- Footer -->
       <section class="section-footer">
           <div class="container">
               <div class="copyright">
                   <p>Â© MyMarketU 2024. All rights reserved.</p>
               </div>
           </div>
       </section>
   </div>

   <script>
       function showAddForm() {
           document.getElementById('addProductForm').style.display = 'block';
       }

       function hideAddForm() {
           document.getElementById('addProductForm').style.display = 'none';
       }
   </script>
</body>
</html>